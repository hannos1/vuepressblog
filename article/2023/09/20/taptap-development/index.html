<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序开发 | Blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/vuepressblog/logo.png">
    <meta name="description" content="
最近学习了一些微信小程序的开发，于是迫不及待地对我个人很喜欢的 taptap 社区进行了模仿。本文主要分享我在开发小程序时的一些思路和坑。抛砖引玉、抛砖引玉，当然本项目仅供学习使用，尊重版权。
开发准备
微信开发者工具
VScode 代码编辑器
taptap 微信小程序
[阿里巴巴矢量图标库](https://link.juejin.cn/?targ ...">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/vuepressblog/assets/css/0.styles.e6a5e1c7.css" as="style"><link rel="preload" href="/vuepressblog/assets/js/app.7b4fa253.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/6.966b288f.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/3.bad93855.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/16.e7a2ed08.js" as="script"><link rel="prefetch" href="/vuepressblog/assets/js/10.800ce87b.js"><link rel="prefetch" href="/vuepressblog/assets/js/11.e2cbdcf3.js"><link rel="prefetch" href="/vuepressblog/assets/js/12.bf63a920.js"><link rel="prefetch" href="/vuepressblog/assets/js/13.e164c151.js"><link rel="prefetch" href="/vuepressblog/assets/js/14.d69930bc.js"><link rel="prefetch" href="/vuepressblog/assets/js/15.11c67c2f.js"><link rel="prefetch" href="/vuepressblog/assets/js/17.98c2b00f.js"><link rel="prefetch" href="/vuepressblog/assets/js/4.e63ab3aa.js"><link rel="prefetch" href="/vuepressblog/assets/js/5.74f1fcd7.js"><link rel="prefetch" href="/vuepressblog/assets/js/7.4e7b2103.js"><link rel="prefetch" href="/vuepressblog/assets/js/8.8065168e.js"><link rel="prefetch" href="/vuepressblog/assets/js/9.a4732338.js"><link rel="prefetch" href="/vuepressblog/assets/js/vuejs-paginate.55b38529.js">
    <link rel="stylesheet" href="/vuepressblog/assets/css/0.styles.e6a5e1c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/vuepressblog/" class="nav-link home-link">Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/vuepressblog/" class="nav-link">主页</a></li><li class="nav-item"><a href="/vuepressblog/article/" class="nav-link router-link-active">文章</a></li><li class="nav-item"><a href="https://github.com/hannos1" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/vuepressblog/" class="nav-link mobile-home-link">Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/vuepressblog/" class="nav-link">主页</a></li><li class="mobile-nav-item"><a href="/vuepressblog/article/" class="nav-link router-link-active">文章</a></li><li class="mobile-nav-item"><a href="https://github.com/hannos1" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        微信小程序开发
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">hannos1</span> <span itemprop="address">   in China</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2023-09-20T00:00:00.000Z">
      Wed Sep 20 2023
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/vuepressblog/tag/JavaScript" data-v-42ccfcd5><span data-v-42ccfcd5>JavaScript</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/vuepressblog/tag/微信小程序" data-v-42ccfcd5><span data-v-42ccfcd5>微信小程序</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/vuepressblog/tag/wechat" data-v-42ccfcd5><span data-v-42ccfcd5>wechat</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>最近学习了一些微信小程序的开发，于是迫不及待地对我个人很喜欢的 taptap 社区进行了模仿。本文主要分享我在开发小程序时的一些思路和坑。抛砖引玉、抛砖引玉，当然本项目仅供学习使用，尊重版权。</p> <h2 id="开发准备"><a href="#开发准备" class="header-anchor">#</a> 开发准备</h2> <ul><li>微信开发者工具</li> <li>VScode 代码编辑器</li> <li>taptap 微信小程序</li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.iconfont.cn%2Fsearch%2Findex%3FsearchType%3Dicon" title="https://www.iconfont.cn/search/index?searchType=icon" target="_blank" rel="noopener noreferrer">阿里巴巴矢量图标库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwww.getmarkman.com%2F" title="http://www.getmarkman.com/" target="_blank" rel="noopener noreferrer">markman<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.fastmock.site/#/" target="_blank" rel="noopener noreferrer">fastmock 在线接口<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="总体架构"><a href="#总体架构" class="header-anchor">#</a> 总体架构</h2> <p>本项目是一个基于小程序的纯前端项目，没有使用云开发。使用小程序所支持的 wxml + wxss + js 开发模式，命名采用 BEM 命名规范。数据主要通过 fastmock 在线接口平台来编写提供。纯小白没有使用其他框架组件(大佬可以 run 了)。</p> <h2 id="项目解构"><a href="#项目解构" class="header-anchor">#</a> 项目解构</h2> <p>以下是我目前实现的 taptap 小程序界面</p> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e19ee539fbc4dbd939a5d0276077491~tplv-k3u1fbpfcp-watermark.image?" alt="010817515449_0QQ图片20230108175127.png" width="80%"> <h3 id="全局样式"><a href="#全局样式" class="header-anchor">#</a> 全局样式</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.page,
page</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">/* 复制到app.wxss */</span>
</code></pre></div><p>接下来对每个页面的细节进行解构。</p> <h2 id="首页"><a href="#首页" class="header-anchor">#</a> 首页</h2> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dd2f83920cb40e0a71f63e29847f2ae~tplv-k3u1fbpfcp-watermark.image?" alt="SVID_20230108_211122_1.gif"></p> <h3 id="布局框架"><a href="#布局框架" class="header-anchor">#</a> 布局框架</h3> <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4593dc1e198c4864875378b75e93c0cf~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108180435.png" width="70%"> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 用于以后写搜索栏 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bd&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 0}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_scroll&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 首页主体，用block块控制主体的渲染来实现下面的tabbar  <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_ft&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tabbar部分  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>这里我没有使用小程序官方的 tabbar 组件来实现 tabbar(成功跳进一个坑，我是 🐖)，但是可以展现另一种思路(<s>强行解释，就是自己蠢了</s>)。</p> <h3 id="主体"><a href="#主体" class="header-anchor">#</a> 主体</h3> <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85e55792d0fa44779d712f3cee4fe51c~tplv-k3u1fbpfcp-watermark.image?" alt="010819560459_0QQ图片20230108195338.png" width="100%"> <h4 id="最近浏览"><a href="#最近浏览" class="header-anchor">#</a> 最近浏览</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent__title&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_title__label&quot;</span><span class="token operator">&gt;</span>最近浏览<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent__bd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent__scroll&quot;</span> scroll<span class="token operator">-</span>x<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{recentgames}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent__item&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_recent_imagemask&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.pic}});&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_item_labelmask&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_item__label&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>这里有一个坑，就是 scroll-view 需要给定 height 值才能滚动，同时父元素要给相应滚动方向设置 overflow 为滚动。</p> <h4 id="关注的游戏论坛"><a href="#关注的游戏论坛" class="header-anchor">#</a> 关注的游戏论坛</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__title&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_title__label&quot;</span><span class="token operator">&gt;</span>关注的游戏论坛<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_a__showmore&quot;</span><span class="token operator">&gt;</span>查看更多<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__bd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern_bdmask&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{concerns}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__itemmask&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__imagemask&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.pic}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__itemtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_concern__itemnumber&quot;</span><span class="token operator">&gt;</span>主贴<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>numbers<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><h4 id="热门游戏论坛"><a href="#热门游戏论坛" class="header-anchor">#</a> 热门游戏论坛</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot__title&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_title__label&quot;</span><span class="token operator">&gt;</span>热门的游戏论坛<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_a__showmore&quot;</span><span class="token operator">&gt;</span>查看更多<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot__bd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot__scroll&quot;</span> scroll<span class="token operator">-</span>x<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{hots}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot__item&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot_itemmask&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot_bgmask&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image: url({{item.backgroundimage}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot_imagemask&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image: url({{item.pic}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot_titlelabel&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot_numbers&quot;</span><span class="token operator">&gt;</span>主贴<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>numbers<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><h4 id="官方论坛"><a href="#官方论坛" class="header-anchor">#</a> 官方论坛</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__title&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_title__label&quot;</span><span class="token operator">&gt;</span>官方论坛<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_a__showmore&quot;</span><span class="token operator">&gt;</span>查看更多<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__bd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official_bdmask&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{officials}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__item&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__itemmask&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__imagemask&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.pic}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__itemtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_official__itemnumber&quot;</span><span class="token operator">&gt;</span>主贴<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>numbers<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>这里主要是用行内的 style 来控制图片的地址，利用字符串模板{{}}来获取 data 里的数据。js 里存放了已经从 fastmock 里获取的数据。</p> <h3 id="接口数据结构"><a href="#接口数据结构" class="header-anchor">#</a> 接口数据结构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;recentgames&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;pic&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;concerns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;pic&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;numbers&quot;</span><span class="token operator">:</span>string
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;hots&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;pic&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;backgroundimage&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;numbers&quot;</span><span class="token operator">:</span>string
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;officials&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;pic&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;numbers&quot;</span><span class="token operator">:</span>string
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>numbers 可以用数值类型。接口数据主要用来测试，没啥特殊要求。</p> <h2 id="动态"><a href="#动态" class="header-anchor">#</a> 动态</h2> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f551e62abef048c4b9f43273ebc17153~tplv-k3u1fbpfcp-watermark.image?" alt="SVID_20230108_211132_1.gif"></p> <h3 id="布局框架-2"><a href="#布局框架-2" class="header-anchor">#</a> 布局框架</h3> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33c3f6bbc5e14b9b9a9a0dce541b1f89~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108205908.png"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 这里是绑定swiper的推荐和关注按钮 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 用于以后写搜索栏 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bd&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 0}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_scroll&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 首页主体  <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiper&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 动态页面  <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_ft&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tabbar部分  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><h3 id="主体-2"><a href="#主体-2" class="header-anchor">#</a> 主体</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span> bindtap<span class="token operator">=</span><span class="token string">&quot;selectmessage&quot;</span> data<span class="token operator">-</span>message<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel {{message == 0 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>推荐<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{message == 0 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span> bindtap<span class="token operator">=</span><span class="token string">&quot;selectmessage&quot;</span> data<span class="token operator">-</span>message<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel {{message == 1 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>关注<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{message == 1 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>swiper <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiper&quot;</span> current<span class="token operator">=</span><span class="token string">&quot;{{message}}&quot;</span> bindchange<span class="token operator">=</span><span class="token string">&quot;messageswiper&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{message == 0}}&quot;</span><span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{suggest}}&quot;</span>  <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__suggest&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hdimg&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.userimg}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item_tsmask&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__time&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>datetime<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__section&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>section<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdartical&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>artical<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdimg&quot;</span> hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage === ''}}&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.backgroundimage}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>video
          hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage !== '' || item.video === ''}}&quot;</span>
          id<span class="token operator">=</span><span class="token string">&quot;suggestvideo-{{item.id}}&quot;</span>
          bindplay<span class="token operator">=</span><span class="token string">&quot;videoplay&quot;</span>
          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__vedio&quot;</span>
          object<span class="token operator">-</span>fit<span class="token operator">=</span><span class="token string">&quot;cover&quot;</span>
          src<span class="token operator">=</span><span class="token string">&quot;https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4&quot;</span>
          poster<span class="token operator">=</span><span class="token string">&quot;{{item.poster}}&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__ft&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__support&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>support<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__comments&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>comments<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{message == 1}}&quot;</span><span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{concern}}&quot;</span>  <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__suggest&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hdimg&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.userimg}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item_tsmask&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__time&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>datetime<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__section&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>section<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdartical&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>artical<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdimg&quot;</span> hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage === ''}}&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.backgroundimage}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>video
          hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage !== '' || item.video === ''}}&quot;</span>
          id<span class="token operator">=</span><span class="token string">&quot;concernvideo-{{item.id}}&quot;</span>
          bindplay<span class="token operator">=</span><span class="token string">&quot;videoplay&quot;</span>
          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__vedio&quot;</span>
          object<span class="token operator">-</span>fit<span class="token operator">=</span><span class="token string">&quot;cover&quot;</span>
          src<span class="token operator">=</span><span class="token string">&quot;https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4&quot;</span>
          poster<span class="token operator">=</span><span class="token string">&quot;{{item.poster}}&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__ft&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__support&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>support<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__comments&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>comments<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">&gt;</span>
</code></pre></div><p>这里需要注意的是文章内容达到 3 行就要让它隐藏，同时高度需要自适应。此外，视频播放功能有一个细节，当点击其他视频时上一个视频应该要停止播放。同时视频和预览图片应该是互斥出现的。</p> <h3 id="视频播放"><a href="#视频播放" class="header-anchor">#</a> 视频播放</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">currentvideo</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token function">videoplay</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastcurrentvideo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>currentvideo<span class="token punctuation">;</span>
    <span class="token keyword">let</span> currentvideo <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createVideoContext</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">currentvideo</span><span class="token operator">:</span>currentvideo
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>lastcurrentvideo <span class="token operator">&amp;&amp;</span> lastcurrentvideo <span class="token operator">!==</span> currentvideo<span class="token punctuation">)</span><span class="token punctuation">{</span>
      lastcurrentvideo<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="swiper-和切换按钮双向绑定"><a href="#swiper-和切换按钮双向绑定" class="header-anchor">#</a> swiper 和切换按钮双向绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">selectmessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span>message
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">messageswiper</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>source <span class="token operator">==</span> <span class="token string">'touch'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span>message
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>当 swiper 触发时改变 message 的值，这个值会通过
<code>false</code>
影响按钮上的样式<code>message_swiperbar__barborder</code>存在，从而达到<code>swiper-&gt;按钮</code>方向的绑定。而<code>按钮-&gt;swiper</code>的绑定是通过 dataset 来改变 message 的值，这个值是 swiper 的 current 属性，会让它翻到指定的页。</p> <h3 id="接口数据结构-2"><a href="#接口数据结构-2" class="header-anchor">#</a> 接口数据结构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token string-property property">&quot;suggest&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;userimg&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;datetime&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;section&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;artical&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;backgroundimage&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;poster&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;support&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;comments&quot;</span><span class="token operator">:</span>number
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;concern&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;userimg&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;datetime&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;section&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;artical&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;backgroundimage&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;poster&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;support&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;comments&quot;</span><span class="token operator">:</span>number
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="我"><a href="#我" class="header-anchor">#</a> 我</h2> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b91bdec94544209a88c415724884fd9~tplv-k3u1fbpfcp-watermark.image?" alt="SVID_20230108_211146_1.gif"></p> <h3 id="布局框架-3"><a href="#布局框架-3" class="header-anchor">#</a> 布局框架</h3> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7ac4ebd997148a997aad71f334ad67d~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108214057.png"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar==2}}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_title&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;top:{{navTop}}px;height:{{objectheight}}px;line-height:{{objectheight}}px&quot;</span><span class="token operator">&gt;</span>TapTap<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 用于以后写搜索栏 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bd&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 0}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_scroll&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 首页主体  <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiper&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 动态页面  <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>swiper<span class="token operator">-</span>item <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>swiper<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 2}}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 我  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_ft&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tabbar部分  <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><h3 id="主体-3"><a href="#主体-3" class="header-anchor">#</a> 主体</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperitem__scrollview&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_contianer&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_title_image&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__cardmask&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__cardbd&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__img&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image: url({{userinfo.img}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__id&quot;</span><span class="token operator">&gt;</span><span class="token constant">ID</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>userid<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__description&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>descript<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__ft&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__fans&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__number&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>fans<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__label&quot;</span><span class="token operator">&gt;</span>粉丝<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__concern&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__number&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>concern<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;me_user__label&quot;</span><span class="token operator">&gt;</span>关注<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>view style<span class="token operator">=</span><span class="token string">&quot;width:100%;height:260rpx;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span>  bindtap<span class="token operator">=</span><span class="token string">&quot;selectmymessage&quot;</span> data<span class="token operator">-</span>mymessage<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel  {{mymessage == 0 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>评价<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{mymessage == 0 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span>  bindtap<span class="token operator">=</span><span class="token string">&quot;selectmymessage&quot;</span> data<span class="token operator">-</span>mymessage<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel {{mymessage == 1 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>内容<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{mymessage == 1 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{mymessage == 0}}&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__suggest&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{appraise}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hdimg&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{userinfo.img}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item_tsmask&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__time&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>datatime<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__section&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;color:#717171&quot;</span><span class="token operator">&gt;</span>游戏时长 <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>totaltime<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">小时</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>phonetype<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdartical&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>text wx<span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{item.star}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;i&quot;</span><span class="token operator">&gt;</span>★ <span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>descript<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;game_card__type1&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;game_card__img1&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image: url({{item.gameimg}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;game_card__name1&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>gamename<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;game_card__comments1&quot;</span><span class="token operator">&gt;</span>评分<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>grade<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token punctuation">}</span>人<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__ft&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__support&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>support<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__comments&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>comments<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{mymessage == 1}}&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__suggest&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{content}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__hdimg&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{userinfo.img}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__name&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>userinfo<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item_tsmask&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__time&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;color:#22bdba&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>section<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__section&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;color:#717171;&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>datetime<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bd&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdartical&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>artical<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__bdimg&quot;</span> hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage === ''}}&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;background-image:url({{item.backgroundimage}});&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>video
          hidden<span class="token operator">=</span><span class="token string">&quot;{{item.backgroundimage !== '' || item.video === ''}}&quot;</span>
          id<span class="token operator">=</span><span class="token string">&quot;suggestvideo-{{item.id}}&quot;</span>
          bindplay<span class="token operator">=</span><span class="token string">&quot;videoplay&quot;</span>
          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__vedio&quot;</span>
          object<span class="token operator">-</span>fit<span class="token operator">=</span><span class="token string">&quot;cover&quot;</span>
          src<span class="token operator">=</span><span class="token string">&quot;https://stream7.iqilu.com/10339/upload_transcode/202002/18/20200218114723HDu3hhxqIT.mp4&quot;</span>
          poster<span class="token operator">=</span><span class="token string">&quot;{{item.poster}}&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__ft&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__support&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__supportnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>support<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__comments&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsimg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_item__commentsnumber&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>comments<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_end&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_end__lable&quot;</span><span class="token operator">&gt;</span>暂无更多<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>这里的 swiper 和按钮是单向绑定，只能通过按钮触发 swiper。同时内容栏目和动态是一致的。</p> <h3 id="swiper-单向绑定"><a href="#swiper-单向绑定" class="header-anchor">#</a> swiper 单向绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mymessage</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token function">selectmymessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> mymessage <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>mymessage<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">mymessage</span><span class="token operator">:</span>mymessage
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>通过更改 swiper 的 current 属性来切换内容。</p> <h3 id="接口数据结构-3"><a href="#接口数据结构-3" class="header-anchor">#</a> 接口数据结构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token string-property property">&quot;me&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;info&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;img&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;userid&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;descript&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;fans&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;concern&quot;</span><span class="token operator">:</span>number
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;appraise&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;datatime&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;totaltime&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;phonetype&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;star&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;descript&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;gamename&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;gameimg&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;grade&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;number&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;support&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;comments&quot;</span><span class="token operator">:</span>number
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;datetime&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;section&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;artical&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;backgroundimage&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;poster&quot;</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;support&quot;</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token string-property property">&quot;comments&quot;</span><span class="token operator">:</span>number
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="搜索界面"><a href="#搜索界面" class="header-anchor">#</a> 搜索界面</h2> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19d73120f5984ff0936604ecc40031aa~tplv-k3u1fbpfcp-watermark.image?" alt="SVID_20230108_211159_1.gif"></p> <h3 id="布局框架-4"><a href="#布局框架-4" class="header-anchor">#</a> 布局框架</h3> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb1d75b0ca734cc8811f250eb7b84880~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108221641.png"></p> <h3 id="主体-4"><a href="#主体-4" class="header-anchor">#</a> 主体</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bd&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search_search__inputmask&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search_search__input&quot;</span> placeholder<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;label&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;搜索&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;cancelmask&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;cancel&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__searchlist&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__searchlistitem&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{searchhistory}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;index&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__itembox&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__itemimgmask&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__itemimg&quot;</span> style<span class="token operator">=</span>&quot;background<span class="token operator">-</span>image<span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>  这里的图片用的矢量库转base64的图片，太长了省略#  <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_search__itemlabel&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>context<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;cancelmask&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;cancel&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hot__title&quot;</span><span class="token operator">&gt;</span>热门搜索<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hot_bd&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hot_bd__item&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{items}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hot_bd__index&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hot_bd__context&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>context<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_hottag&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hottag_title&quot;</span><span class="token operator">&gt;</span>热门游戏标签<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hottag_taglist&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;hottag_item&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{tags}}&quot;</span> <span class="token literal-property property">wx</span><span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>tagname<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>由于微信小程序限制文件大小，本地的图片资源基本上用不了。所以一般把本地的图片资源转成 base64 格式在复制到样式上，但是这样非常长，记得开自动折行。搜索框可以写一个简单的 search suggest 和防抖，等有机会加上去再更新本文。</p> <h3 id="js-数据结构"><a href="#js-数据结构" class="header-anchor">#</a> js 数据结构</h3> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token literal-property property">items</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token literal-property property">context</span><span class="token operator">:</span>string
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tags</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
          <span class="token literal-property property">tagname</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token literal-property property">hash</span><span class="token operator">:</span>string
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">searchhistory</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">context</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token literal-property property">hash</span><span class="token operator">:</span>string
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">context</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
          <span class="token literal-property property">hash</span><span class="token operator">:</span>string
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
</code></pre></div><p>这里数据比较少，我就只在 js 写了一些测试数据,<code>searchhistory</code>的子属性没有 id，wx-for 时的 key 可以用 index</p> <h2 id="tabbar-逻辑"><a href="#tabbar-逻辑" class="header-anchor">#</a> tabbar 逻辑</h2> <h3 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_container&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 用于以后写搜索栏 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bd&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 0}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 首页主体  <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 动态页面  <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>


        <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 2}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 我  <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_ft&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">&quot;selectbar&quot;</span> data<span class="token operator">-</span>bar<span class="token operator">=</span><span class="token string">&quot;0&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__index&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{bar != 0 &amp;&amp; 'page_bar__image'}} {{bar == 0 &amp;&amp; 'page_bar__homefill'}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__label&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">&quot;selectbar&quot;</span> data<span class="token operator">-</span>bar<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__dynamic&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{bar != 1 &amp;&amp; 'page_bar__image'}} {{bar == 1 &amp;&amp; 'page_bar__dynamicfill'}}&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__label&quot;</span><span class="token operator">&gt;</span>动态<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">&quot;selectbar&quot;</span> data<span class="token operator">-</span>bar<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__me&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{bar != 2 &amp;&amp; 'page_bar__image'}} {{bar == 2 &amp;&amp; 'page_bar__myfill'}}&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page_bar__label&quot;</span><span class="token operator">&gt;</span>我<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>主页中通过 tabbar 上的 bindtap 来改变 bar 的值，从而觉得 wx-if 代码块的渲染，这样做比使用 hidden 开销更大，可以把 block 代码块换成 view，在改变它的 hidden 属性。使用官方的 tabbar 当然更省事啦，而且官方的代码肯定更强壮，但是这样做可以定制更好看的 tabbar(如果真的有需要的话)</p> <h3 id="js"><a href="#js" class="header-anchor">#</a> js</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

  <span class="token function">selectbar</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> bar <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>bar<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">bar</span><span class="token operator">:</span>bar
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="定制搜索框"><a href="#定制搜索框" class="header-anchor">#</a> 定制搜索框</h2> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5da5fc3482964415bda73fedb6570b0f~tplv-k3u1fbpfcp-watermark.image?" alt="SVID_20230108_224133_1.gif"></p> <p>可以看到四个页面中出现了两种搜索框，如果你使用的是官方的 tabbar 组件，因为会有 4 个页面文件，那么只有首页和动态页面需要修改 json 文件，往里面加入<code>&quot;navigationStyle&quot;: &quot;custom&quot;</code>。而本项目由于这个 tabbar 的坑(成功撞到南墙)，我需要通过 block 语句来控制一些标签的渲染来达到同样的效果，当然 hidden 同理。</p> <h3 id="搜索框结构"><a href="#搜索框结构" class="header-anchor">#</a> 搜索框结构</h3> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e625d8ee538c4c818f2d1b89dab84e7d~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108225159.png"></p> <p>为了适配其他机型，我们不能单纯地用 markman 测量大小之后就给死样式。这时候需要用到系统的数据来控制样式。</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3facd6e5f924ecb88ab9651d863b2e3~tplv-k3u1fbpfcp-watermark.image?" alt="QQ图片20230108233218.png"></p> <p>从图片中我们可以发现，要使用最少的代码达到相同的效果，至少需要三个值，它们分别是当前<code>按钮到页面顶部的距离navTop</code>、<code>按钮高度objectheight</code>、<code>搜索栏高度navHeight</code>。这些值在定制各页面都有可能出现，所以我放入 app.js 中作为全局的数据供各页面选择性引入。</p> <h3 id="app-js"><a href="#app-js" class="header-anchor">#</a> app.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">onLaunch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> menuButtonObject <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getMenuButtonBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> statusBarHeight <span class="token operator">=</span> res<span class="token punctuation">.</span>statusBarHeight<span class="token punctuation">;</span> <span class="token comment">// 信息栏高度</span>
        <span class="token keyword">let</span> navHeight <span class="token operator">=</span> menuButtonObject<span class="token punctuation">.</span>height <span class="token operator">+</span> menuButtonObject<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token punctuation">(</span>menuButtonObject<span class="token punctuation">.</span>top <span class="token operator">-</span> statusBarHeight<span class="token punctuation">)</span>
        <span class="token keyword">let</span> navTop <span class="token operator">=</span> menuButtonObject<span class="token punctuation">.</span>top
        <span class="token keyword">let</span> objectheight <span class="token operator">=</span> menuButtonObject<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalData<span class="token punctuation">,</span><span class="token punctuation">{</span>
          navHeight<span class="token punctuation">,</span>
          navTop<span class="token punctuation">,</span>
          objectheight
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">globalData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">navHeight</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">navTop</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">objectheight</span><span class="token operator">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="index-js"><a href="#index-js" class="header-anchor">#</a> index.js</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取app实例</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// tabbar会改变这个值，不同页的搜索框会有不同的内容</span>
    <span class="token literal-property property">navHeight</span><span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>navHeight<span class="token punctuation">,</span>
    <span class="token literal-property property">navTop</span><span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>navTop<span class="token punctuation">,</span>
    <span class="token literal-property property">objectheight</span><span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>objectheight<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="index-wxml"><a href="#index-wxml" class="header-anchor">#</a> index.wxml</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_container&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;height:{{navHeight}}px;&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar!=2}}&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_img&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;top:{{navTop}}px;width:{{objectheight*2.58}}px;height:{{objectheight}}px;background-image:url('https://img2.tapimg.com/bbcode/images/1a667685a3d219cfd780ee3f0592a067.png');&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_box&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;top:{{navTop}}px;height:{{objectheight}}px;&quot;</span> bindtap<span class="token operator">=</span><span class="token string">&quot;searchbar&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_box__img&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width:{{0.74*objectheight}}px;height:{{0.74*objectheight}}px;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_box__label&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;height:{{objectheight}}px;line-height:{{objectheight}}px&quot;</span><span class="token operator">&gt;</span>搜游戏攻略、社区<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar==2}}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;searchbar_title&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;top:{{navTop}}px;height:{{objectheight}}px;line-height:{{objectheight}}px&quot;</span><span class="token operator">&gt;</span>TapTap<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>block wx<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;{{bar == 1}}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span> bindtap<span class="token operator">=</span><span class="token string">&quot;selectmessage&quot;</span> data<span class="token operator">-</span>message<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel {{message == 0 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>推荐<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{message == 0 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__baritem&quot;</span> bindtap<span class="token operator">=</span><span class="token string">&quot;selectmessage&quot;</span> data<span class="token operator">-</span>message<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;message_swiperbar__barlabel {{message == 1 &amp;&amp; 'message_swiperbar__barlabelcheck'}}&quot;</span><span class="token operator">&gt;</span>关注<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{{message == 1 &amp;&amp; 'message_swiperbar__barborder'}}&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>
</code></pre></div><h3 id="搜索框跳转"><a href="#搜索框跳转" class="header-anchor">#</a> 搜索框跳转</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">searchbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/search/search'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="项目总结"><a href="#项目总结" class="header-anchor">#</a> 项目总结</h2> <p>本项目属于纯前端项目，难度较低，适合用于微信小程序本体的开发练手和熟悉响应式编程思想。当然可以在此基础上进行拓展，加入组件化的手法或者使用外部框架。</p> <p>同时由于是纯前端项目，数据由 fastmock 的外部接口提供，需要勾选右上角'详情' -&gt; '本地设置' -&gt; '不校验合法域名' ，否则数据会被拦截。</p> <h2 id="源码"><a href="#源码" class="header-anchor">#</a> 源码</h2> <p><a href="https://github.com/hannos1/taptap.git" target="_blank" rel="noopener noreferrer">项目源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="拓展"><a href="#拓展" class="header-anchor">#</a> 拓展</h2> <p>更多功能将会在这里拓展更新，敬请期待。</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#前言" title="前言">前言</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#开发准备" title="开发准备">开发准备</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#总体架构" title="总体架构">总体架构</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#项目解构" title="项目解构">项目解构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#全局样式" title="全局样式">全局样式</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#首页" title="首页">首页</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#布局框架" title="布局框架">布局框架</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#主体" title="主体">主体</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#接口数据结构" title="接口数据结构">接口数据结构</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#动态" title="动态">动态</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#布局框架-2" title="布局框架">布局框架</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#主体-2" title="主体">主体</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#视频播放" title="视频播放">视频播放</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#swiper-和切换按钮双向绑定" title="swiper 和切换按钮双向绑定">swiper 和切换按钮双向绑定</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#接口数据结构-2" title="接口数据结构">接口数据结构</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#我" title="我">我</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#布局框架-3" title="布局框架">布局框架</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#主体-3" title="主体">主体</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#swiper-单向绑定" title="swiper 单向绑定">swiper 单向绑定</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#接口数据结构-3" title="接口数据结构">接口数据结构</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#搜索界面" title="搜索界面">搜索界面</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#布局框架-4" title="布局框架">布局框架</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#主体-4" title="主体">主体</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#js-数据结构" title="js 数据结构">js 数据结构</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#tabbar-逻辑" title="tabbar 逻辑">tabbar 逻辑</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#结构" title="结构">结构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#js" title="js">js</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#定制搜索框" title="定制搜索框">定制搜索框</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#搜索框结构" title="搜索框结构">搜索框结构</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#app-js" title="app.js">app.js</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#index-js" title="index.js">index.js</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#index-wxml" title="index.wxml">index.wxml</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#搜索框跳转" title="搜索框跳转">搜索框跳转</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#项目总结" title="项目总结">项目总结</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#源码" title="源码">源码</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#拓展" title="拓展">拓展</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/hannos1" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/vuepressblog/assets/js/app.7b4fa253.js" defer></script><script src="/vuepressblog/assets/js/6.966b288f.js" defer></script><script src="/vuepressblog/assets/js/3.bad93855.js" defer></script><script src="/vuepressblog/assets/js/16.e7a2ed08.js" defer></script>
  </body>
</html>
